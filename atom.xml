<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>FallenAngel Blog</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2016-06-13T15:20:00.941Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>FallenAngel</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Tessert-OCR Linux下的训练</title>
    <link href="http://yoursite.com/2016/06/13/Tessert-OCR-Linux%E4%B8%8B%E7%9A%84%E7%BC%96%E8%AF%91%E4%BB%A5%E5%8F%8A%E8%AE%AD%E7%BB%83/"/>
    <id>http://yoursite.com/2016/06/13/Tessert-OCR-Linux下的编译以及训练/</id>
    <published>2016-06-13T13:44:34.000Z</published>
    <updated>2016-06-13T15:20:00.941Z</updated>
    
    <content type="html">&lt;h2 id=&quot;工具及源码下载地址&quot;&gt;&lt;a href=&quot;#工具及源码下载地址&quot; class=&quot;headerlink&quot; title=&quot;工具及源码下载地址:&quot;&gt;&lt;/a&gt;工具及源码下载地址:&lt;/h2&gt;&lt;p&gt;Tessert-OCR :&lt;a href=&quot;https://github.com/tesseract-ocr/tesseract&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/tesseract-ocr/tesseract&lt;/a&gt;&lt;br&gt;编译教程:&lt;a href=&quot;https://github.com/tesseract-ocr/tesseract/wiki/Compiling&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/tesseract-ocr/tesseract/wiki/Compiling&lt;/a&gt;&lt;br&gt;Leptonica:&lt;a href=&quot;http://www.leptonica.org/download.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.leptonica.org/download.html&lt;/a&gt;&lt;br&gt;jTessBoxEditor:&lt;a href=&quot;http://sourceforge.net/projects/vietocr/files/jTessBoxEditor/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://sourceforge.net/projects/vietocr/files/jTessBoxEditor/&lt;/a&gt;&lt;br&gt;注:编译完tesseract后一定要编译training哦&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;make training&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo make install training&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;##训练过程&lt;/p&gt;
&lt;p&gt;####1.获取训练样本&lt;br&gt;就是一堆你要识别的验证码图片,越多越好.越多后面工作量越大.&lt;/p&gt;
&lt;p&gt;####2.合并样本&lt;br&gt;运行jTessBoxEditor工具，在点击菜单栏中Tools—&amp;gt;Merge TIFF。在弹出的对话框中选择样本图像（按Shift选择多张），合并成一个tif文件&lt;br&gt;注:文件名格式&lt;br&gt;[lang].[fontname].exp[num].tif&lt;br&gt;&lt;span style=&quot;color:#ff0000&quot;&gt;&lt;strong&gt;其中lang为语言名称，fontname为字体名称，num为序号，可以随便定义。&lt;/strong&gt;&lt;/span&gt;&lt;br&gt;我们这使用 num.font.exp0&lt;/p&gt;
&lt;p&gt;####3.生成Box File文件&lt;br&gt;tesseract.exe num.font.exp0.tif num.font.exp0 batch.nochop makebox&lt;br&gt;注意替换为自己的文件名&lt;/p&gt;
&lt;p&gt;####4.文字校正&lt;br&gt;1.把上一步生成的num.font.exp0.box和原本的num.font.exp0.tif放在同一个文件夹里.一般都是在一个文件夹里的&lt;br&gt;2.运行jTessBoxEditor.选择box editor 然后点击open 然后选中num.font.exp0.tif,把所有错误的识别修改为正确的识别,如果有识别不出来的,需要踢出训练库从第二步重新开始&lt;br&gt;3.保存文件&lt;/p&gt;
&lt;p&gt;####5.定义字体特征文件&lt;br&gt;Tesseract-OCR3.01以上的版本在训练之前需要创建一个名称为font_properties的字体特征文件。&lt;br&gt;font_properties不含有BOM头，文件内容格式如下：&lt;/p&gt;
&lt;p&gt;&lt;fontname&gt; &lt;italic&gt; &lt;bold&gt; &lt;fixed&gt; &lt;serif&gt; &lt;fraktur&gt;&lt;br&gt;其中fontname为字体名称，必须与[lang].[fontname].exp[num].box中的名称保持一致。&lt;italic&gt; 、&lt;bold&gt; 、&lt;fixed&gt; 、&lt;serif&gt;、 &lt;fraktur&gt;的取值为1或0，表示字体是否具有这些属性。&lt;br&gt;这里在样本图片所在目录下创建一个名称为font_properties的文件，用记事本打开，输入以下下内容：&lt;br&gt;font 0 0 0 0 0&lt;/fraktur&gt;&lt;/serif&gt;&lt;/fixed&gt;&lt;/bold&gt;&lt;/italic&gt;&lt;/fraktur&gt;&lt;/serif&gt;&lt;/fixed&gt;&lt;/bold&gt;&lt;/italic&gt;&lt;/fontname&gt;&lt;/p&gt;
&lt;p&gt;####7.生成语言文件&lt;br&gt;windows 脚本&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;rem 执行改批处理前先要目录下创建font_properties文件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo Run Tesseract for Training..&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tesseract.exe num.font.exp0.tif num.font.exp0 nobatch box.train&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo Compute the Character Set..&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;unicharset_extractor.exe num.font.exp0.box&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mftraining -F font_properties -U unicharset -O num.unicharset num.font.exp0.tr&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo Clustering..&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cntraining.exe num.font.exp0.tr&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo Rename Files..&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rename normproto num.normproto&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rename inttemp num.inttemp&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rename pffmtable num.pffmtable&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rename shapetable num.shapetable&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo Create Tessdata..&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;combine_tessdata.exe num.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Linux 命令&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;tesseract num.font.exp0.tif num.font.exp0 nobatch box.train&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;unicharset_extractor num.font.exp0.box&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mftraining -F font_properties -U unicharset -O num.unicharset num.font.exp0.tr &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cntraining num.font.exp0.tr&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mv normproto num.normproto&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mv inttemp num.inttemp&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mv pffmtable num.pffmtable&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mv shapetable num.shapetable&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;combine_tessdata num.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;注:unicharset_extractor,cntraining,combine_tessdata在之前编译的tessert目录下的training目录下&lt;br&gt;所以一定要编译training 不要只编译tesseract哦&lt;/p&gt;
&lt;p&gt;&lt;span style=&quot;color:#ff0000&quot;&gt;&lt;strong&gt;执行命令后需确认打印结果中的Offset 1、3、4、5、13这些项不是-1。&lt;/strong&gt;&lt;/span&gt;这样，一个新的语言文件就生成了。&lt;br&gt;num.traineddata便是最终生成的语言文件，将生成的num.traineddata拷贝到tessdata目录下。可以用它来进行字符识别了。&lt;/p&gt;
&lt;p&gt;参考文章:&lt;br&gt;&lt;a href=&quot;http://blog.csdn.net/yasi_xi/article/details/8763385&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://blog.csdn.net/yasi_xi/article/details/8763385&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;工具及源码下载地址&quot;&gt;&lt;a href=&quot;#工具及源码下载地址&quot; class=&quot;headerlink&quot; title=&quot;工具及源码下载地址:&quot;&gt;&lt;/a&gt;工具及源码下载地址:&lt;/h2&gt;&lt;p&gt;Tessert-OCR :&lt;a href=&quot;https://github.com
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Solr配置</title>
    <link href="http://yoursite.com/2016/04/17/Solr%E9%85%8D%E7%BD%AE/"/>
    <id>http://yoursite.com/2016/04/17/Solr配置/</id>
    <published>2016-04-17T09:47:09.000Z</published>
    <updated>2016-04-17T16:25:10.847Z</updated>
    
    <content type="html">&lt;p&gt;配置参考:&lt;a href=&quot;http://www.freebuf.com/articles/database/100423.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.freebuf.com/articles/database/100423.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;现在说两个注意点&lt;/p&gt;
&lt;p&gt;1.如果搭配&lt;font color=&quot;red&quot;&gt;&lt;strong&gt;Mysql&lt;/strong&gt;&lt;/font&gt;&lt;br&gt;打开db-data-config.xml，会看到一段类似的代码&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;dataConfig&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;dataSource name=&amp;quot;sgk&amp;quot; type=&amp;quot;JdbcDataSource&amp;quot; driver=&amp;quot;com.mysql.jdbc.Driver&amp;quot; url=&amp;quot;jdbc:mysql://127.0.0.1:3306/newsgk&amp;quot; user=&amp;quot;root&amp;quot; password=&amp;quot;password&amp;quot; batchSize=&amp;quot;-1&amp;quot; /&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/dataConfig&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;&lt;strong&gt;batchSize设置为-1&lt;/strong&gt;&lt;/font&gt;(是否可以设置其他值没有尝试)，否则一直无法导入&lt;/p&gt;
&lt;p&gt;2.如果搭配&lt;font color=&quot;red&quot;&gt;&lt;strong&gt;MSSQL&lt;/strong&gt;&lt;/font&gt;&lt;br&gt;请&lt;font color=&quot;red&quot;&gt;&lt;strong&gt;不要设置batchSize&lt;/strong&gt;&lt;/font&gt;(是否可以设置其他值没有尝试,-1是不可行的),否则无法导入&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;配置参考:&lt;a href=&quot;http://www.freebuf.com/articles/database/100423.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.freebuf.com/articles/databa
    
    </summary>
    
    
  </entry>
  
</feed>
